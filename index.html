<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ ì€ì‚¬ í…ŒìŠ¤íŠ¸</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');

        :root {
            --primary-color: #5a67d8;
            --primary-light: #ebf4ff;
            --background-color: #f7fafc;
            --card-background: #ffffff;
            --text-dark: #2d3748;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --white: #fff;
            --success-color: #48bb78;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--background-color);
            color: var(--text-dark);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 700px;
        }

        .test-wrapper, #results {
            background-color: var(--card-background);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
            padding: 40px;
            margin-bottom: 30px;
            width: 100%;
        }

        h1 {
            color: var(--text-dark);
            text-align: center;
            margin-bottom: 15px;
            font-size: 2em;
            font-weight: 700;
        }

        .instructions {
            text-align: center;
            color: var(--text-light);
            background-color: var(--primary-light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .instructions p { margin: 8px 0; }
        .instructions strong { color: var(--primary-color); }

        .progress-container { margin-bottom: 30px; }
        .progress-bar-bg { width: 100%; height: 12px; background-color: var(--border-color); border-radius: 6px; overflow: hidden; }
        .progress-bar-fg { width: 0%; height: 100%; background-color: var(--primary-color); border-radius: 6px; transition: width 0.4s ease-in-out; }
        .progress-text { text-align: right; font-size: 0.9em; color: var(--text-light); margin-top: 8px; font-weight: 500; }

        .question-card {
            margin-bottom: 15px;
            padding: 20px 25px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            transition: box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .question-card:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .question-text { font-weight: 500; line-height: 1.6; flex-grow: 1; }
        .score-selector { display: flex; gap: 10px; flex-shrink: 0; }

        .score-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            background-color: var(--card-background);
            color: var(--text-light);
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .score-btn:hover { border-color: var(--primary-color); color: var(--primary-color); transform: translateY(-2px); }
        .score-btn.selected { background-color: var(--primary-color); border-color: var(--primary-color); color: var(--white); transform: scale(1.1); }

        .submit-button {
            display: block;
            width: 100%;
            padding: 18px;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--white);
            background: linear-gradient(45deg, #5a67d8, #7f9cf5);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            margin-top: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(90, 103, 216, 0.4);
        }

        .submit-button:hover { opacity: 0.9; transform: translateY(-3px); box-shadow: 0 7px 20px rgba(90, 103, 216, 0.5); }
        #results { margin-top: 30px; display: none; }
        #results h2 { text-align: center; color: var(--text-dark); margin-bottom: 30px; }
        .result-item { display: flex; align-items: center; margin-bottom: 25px; }
        .result-item:last-child { margin-bottom: 0; }
        .rank { font-size: 1.8em; font-weight: 700; color: var(--text-light); width: 60px; text-align: center;}
        .result-details { flex-grow: 1; }
        .gift-name { font-size: 1.25em; font-weight: 700; margin: 0 0 10px 0; color: var(--text-dark); }
        .progress-bar-container { width: 100%; background-color: var(--border-color); border-radius: 8px; height: 22px; overflow: hidden; }
        .progress-bar { 
            height: 100%; 
            background: linear-gradient(90deg, var(--success-color), #81e6d9);
            width: 0%; 
            border-radius: 8px; 
            transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
            display: flex; 
            align-items: center; 
            justify-content: flex-end;
            color: var(--white); 
            font-size: 0.9em;
            font-weight: 700;
            padding-right: 10px;
        }

        @media (max-width: 700px) {
            body { padding: 20px 0; }
            .container { padding: 0 15px; }
            .test-wrapper, #results { padding: 25px; }
            h1 { font-size: 1.7em; }
            .question-card { flex-direction: column; align-items: flex-start; gap: 15px; }
            .score-selector { align-self: center; width: 100%; justify-content: space-around; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-wrapper">
            <h1>âœ¨ ì€ì‚¬ ë°œê²¬ í…ŒìŠ¤íŠ¸ âœ¨</h1>
            <div class="instructions">
                <p>ìƒ¬ë¡¬ :) <br> ì—¬ëŸ¬ë¶„ì˜ ì€ì‚¬ê°€ ë‹¤ì‹œ ë¶ˆ ë¶™ê¸°ë¥¼ ê¿ˆ ê¾¸ë©° <br> ì€ì‚¬í…ŒìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í•´ ë´¤ì–´ìš”! <br> ì´ë²ˆ ì•„ì›ƒë¦¬ì¹˜ê°€ ì—´ë°© ë¿ ì•„ë‹ˆë¼ <br> ìš°ë¦¬ ì„œë¡œë¥¼ ì„¸ìš°ëŠ” ì‚¬ë‘ì˜ ì—¬ì • ë˜ê¸¸ <br>ë§ˆìŒ ë‹¤í•´ ì¶•ë³µí•©ë‹ˆë‹¤! - <strong>í™</strong></p>
                <p><br>ê° ë¬¸í•­ì´ ìì‹ ì—ê²Œ ì–¼ë§ˆë‚˜ í•´ë‹¹í•˜ëŠ”ì§€ <br><strong>ìˆ«ì</strong>ë¥¼ ëˆŒëŸ¬ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                <p><strong>3</strong>: ë§¤ìš° ê·¸ë ‡ë‹¤, <strong>2</strong>: ëŒ€ì²´ë¡œ ê·¸ë ‡ë‹¤, <strong>1</strong>: ì¡°ê¸ˆ ê·¸ë ‡ë‹¤, <strong>0</strong>: ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</p>
            </div>

            <form id="gifts-form">
                <div class="progress-container">
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fg" id="progress-bar"></div>
                    </div>
                    <div class="progress-text" id="progress-text">0 / 42</div>
                </div>

                <div id="questions-container"></div>
                <button type="submit" class="submit-button">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
            </form>
        </div>

        <div id="results">
            <h2>ë‚˜ì˜ ì€ì‚¬ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            <div id="results-list"></div>
        </div>
    </div>

    <script>
        const giftsData = [
            { id: 'pastoring', name: 'ì–‘ìœ¡', questions: [
                { id: 2, text: 'ì‚¬ëŒë“¤ì˜ ì„±ê³µê³¼ ì‹¤íŒ¨ì˜ ê³¼ì •ì„ ê¾¸ì¤€íˆ í•¨ê»˜í•˜ë©° ê·¸ë“¤ì˜ ì„±ì¥ì„ ë•ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.' },
                { id: 27, text: 'ê³µë™ì²´ ì§€ì²´ë“¤ì˜ ì˜ì ì¸ ì„±ì¥ì„ ë•ëŠ” ê²ƒì— ì±…ì„ê°ì„ ëŠë¼ë©°, ê·¸ ì—­í• ì„ ê¸°ì˜ê²Œ ê°ë‹¹í•©ë‹ˆë‹¤.' },
                { id: 52, text: 'ì‚¬ëŒë“¤ì„ ì˜ì ìœ¼ë¡œ ì´ëŒê³  ì§€ë„í•˜ëŠ” ì¼ì— í° ë¶€ë‹´ê°ì´ë‚˜ ë‘ë ¤ì›€ì´ ì—†ìŠµë‹ˆë‹¤.' }
            ]},
            { id: 'teaching', name: 'ê°€ë¥´ì¹¨', questions: [
                { id: 3, text: 'ì‚¬ëŒë“¤ì€ ì œê°€ ì„±ê²½ì˜ ì§„ë¦¬ë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ì˜ ì„¤ëª…í•´ì¤€ë‹¤ê³  ë§í•©ë‹ˆë‹¤.' },
                { id: 28, text: 'ì„±ê²½ì˜ ê°€ë¥´ì¹¨ì„ ê³µë™ì²´ì— ì˜ ì ìš©í•˜ì—¬ ê±´ê°•í•œ ì„±ì¥ì„ ì´ë£° ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒì— ìì‹  ìˆìŠµë‹ˆë‹¤.' },
                { id: 53, text: 'ì„±ê²½ì˜ ì§„ë¦¬ë¥¼ ê¹Šì´ ì—°êµ¬í•˜ê³ , ê¹¨ë‹¬ì€ ê²ƒì„ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ë‚˜ëˆ„ê¸° ìœ„í•´ ì‹œê°„ì„ ê¸°êº¼ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'wisdom', name: 'ì§€í˜œ', questions: [
                { id: 4, text: 'í•˜ë‚˜ë‹˜ì˜ ë§ì”€ì„ ì œ ì‚¶ì˜ ë¬¸ì œì— ì ìš©í•˜ì—¬ í•´ê²°ì±…ì„ ì°¾ëŠ”ë° ìµìˆ™í•©ë‹ˆë‹¤.' },
                { id: 29, text: 'ë³µì¡í•˜ê³  ì–´ë ¤ìš´ ë¬¸ì œì— ë¶€ë”ªí˜”ì„ ë•Œ, ìƒí™©ì„ ê¿°ëš«ëŠ” í†µì°°ë ¥ì´ë‚˜ í•´ê²°ì±…ì´ ë– ì˜¤ë¥¼ ë•Œê°€ ë§ìŠµë‹ˆë‹¤.' },
                { id: 54, text: 'ì‚¬ëŒë“¤ì´ ê³ ë¯¼ì„ í„¸ì–´ë†“ì„ ë•Œ, ìƒí™©ì— ë§ëŠ” ì„±ê²½ì ì¸ ì¡°ì–¸ì„ í•´ì£¼ê³¤ í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'exhortation', name: 'ê¶Œë©´', questions: [
                { id: 6, text: 'ë‚™ì‹¬í•˜ê³  í˜ë“¤ì–´í•˜ëŠ” ì‚¬ëŒë“¤ì„ ì§„ì‹¬ ì–´ë¦° ë§ë¡œ ìœ„ë¡œí•˜ê³  ê²©ë ¤í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.' },
                { id: 31, text: 'ì‚¬ëŒë“¤ì´ ì¢‹ì€ ì¼ì— ì°¸ì—¬í•˜ë„ë¡ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ê³  ìš©ê¸°ë¥¼ ë¶ë‹ì•„ ì£¼ëŠ” ê²ƒì— ëŠ¥ìˆ™í•©ë‹ˆë‹¤.' },
                { id: 56, text: 'ìŠ¬í””ì´ë‚˜ ì–´ë ¤ì›€ì— ì²˜í•œ ì‚¬ëŒë“¤ì´ ì €ì™€ ëŒ€í™”í•˜ê³  ë‚˜ë©´ ìœ„ë¡œë¥¼ ì–»ëŠ”ë‹¤ê³  ë§í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'relationship', name: 'ê´€ê³„', questions: [
                { id: 301, text: 'ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ ì‰½ê²Œ ì¹œí•´ì§€ê³ , ì‚¬ëŒë“¤ì€ ì €ì™€ í•¨ê»˜ ìˆì„ ë•Œ í¸ì•ˆí•¨ì„ ëŠë‚€ë‹¤ê³  ë§í•©ë‹ˆë‹¤.' },
                { id: 302, text: 'ì‚¬ëŒë“¤ì€ ì €ì—ê²Œ ê³ ë¯¼ì„ ìì£¼ í„¸ì–´ë†“ìœ¼ë©°, ì €ì™€ ëŒ€í™”í•˜ë©´ ë§ˆìŒì´ ê°€ë²¼ì›Œì§„ë‹¤ê³  í•©ë‹ˆë‹¤.' },
                { id: 303, text: 'ê³µë™ì²´ì— ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ, ì¤‘ê°„ì—ì„œ ì–‘ìª½ì˜ ì…ì¥ì„ ì¡°ìœ¨í•˜ê³  í™”í•´ì‹œí‚¤ëŠ” ì—­í• ì„ ìì£¼ í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'helps', name: 'ë„ì›€', questions: [
                { id: 9, text: 'ë¦¬ë”ë‚˜ ë‹¤ë¥¸ ì§€ì²´ë“¤ì´ ë§¡ì€ ì‚¬ì—­ì„ ì˜ ê°ë‹¹í•  ìˆ˜ ìˆë„ë¡ ë’¤ì—ì„œ ë•ëŠ” ê²ƒì„ ì¦ê±°ì›Œí•©ë‹ˆë‹¤.' },
                { id: 34, text: 'ì£¼ë³€ ì‚¬ëŒë“¤ì€ ì œê°€ ê·¸ë“¤ì˜ ì‚¬ì—­ì— ì‹¤ì§ˆì ì¸ ë„ì›€ì„ ì£¼ì—ˆë‹¤ê³  ìì£¼ ì´ì•¼ê¸°í•©ë‹ˆë‹¤.' },
                { id: 59, text: 'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ í•˜ê¸° ì‹«ì–´í•˜ê±°ë‚˜ ì§€ë£¨í•˜ê²Œ ëŠë¼ëŠ” ì¼ì´ë¼ë„ ê¸°êº¼ì´ ë§¡ì•„ì„œ ì¦ê²ê²Œ í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'missionary', name: 'ì„ êµ', questions: [
                { id: 11, text: 'ë‚˜ì™€ ë‹¤ë¥¸ ë¬¸í™”ì  ë°°ê²½ì„ ê°€ì§„ ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” ê²ƒì„ ì¦ê¸°ë©°, ê·¸ë“¤ë„ ì €ë¥¼ í¸ì•ˆí•˜ê²Œ ëŒ€í•©ë‹ˆë‹¤.' },
                { id: 36, text: 'ë‹¤ë¥¸ ë¬¸í™”ê¶Œì˜ ì‚¬ëŒë“¤ì—ê²Œ ë³µìŒì„ ì „í•˜ê¸° ìœ„í•´ ì™¸êµ­ì–´ë¥¼ ë°°ìš°ëŠ” ê²ƒì— í¥ë¯¸ê°€ ìˆìŠµë‹ˆë‹¤.' },
                { id: 61, text: 'ìµìˆ™í•œ í™˜ê²½ì„ ë– ë‚˜ ìƒˆë¡œìš´ ë¬¸í™” ì†ì—ì„œ ì‚¬ëŠ” ê²ƒì— ëŒ€í•œ ë‘ë ¤ì›€ë³´ë‹¤ ê¸°ëŒ€ê°ì´ ë” í½ë‹ˆë‹¤.' }
            ]},
            { id: 'evangelism', name: 'ì „ë„', questions: [
                { id: 12, text: 'ë¯¿ì§€ ì•ŠëŠ” ì‚¬ëŒë“¤ì—ê²Œ ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ê°€ê°€ ì˜ˆìˆ˜ë‹˜ì„ ì†Œê°œí•˜ê³  ë³µìŒì„ ì „í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤.' },
                { id: 37, text: 'ì œê°€ ì˜ˆìˆ˜ë‹˜ì„ ë¯¿ê³  ë³€í™”ëœ ì‚¶ì˜ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆŒ ë•Œ, ë¯¿ì§€ ì•ŠëŠ” ì¹œêµ¬ë“¤ì´ ë§ˆìŒì„ ì—½ë‹ˆë‹¤.' },
                { id: 62, text: 'ë¯¿ì§€ ì•ŠëŠ” ì¹œêµ¬ë“¤ê³¼ ì¢‹ì€ ê´€ê³„ë¥¼ ìœ ì§€í•˜ë©´ì„œë„, ì œ ì‹ ì•™ì„ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„í•˜ëŠ” í¸ì…ë‹ˆë‹¤.' }
            ]},
            { id: 'hospitality', name: 'ëŒ€ì ‘', questions: [
                { id: 13, text: 'ëˆ„êµ¬ë“ ì§€ ìš°ë¦¬ ì§‘ì— í¸í•˜ê²Œ ë¨¸ë¬¼ë‹¤ ê°ˆ ìˆ˜ ìˆë„ë¡ ì§‘ì„ ê°œë°©í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.' },
                { id: 38, text: 'êµíšŒë‚˜ ê³µë™ì²´ í–‰ì‚¬ê°€ ìˆì„ ë•Œ, ìŒì‹ì„ ì¤€ë¹„í•˜ê±°ë‚˜ ìë¦¬ë¥¼ ì •ë¦¬í•˜ëŠ” ë“± ëª¸ìœ¼ë¡œ ì„¬ê¸°ëŠ” ê²ƒì„ ê¸°ë»í•©ë‹ˆë‹¤.' },
                { id: 63, text: 'ìš°ë¦¬ ì§‘ì— ë°©ë¬¸í•œ ì‚¬ëŒë“¤ì€ ë§ˆì¹˜ ìê¸° ì§‘ì²˜ëŸ¼ í¸ì•ˆí•˜ê³  ì•„ëŠ‘í•˜ë‹¤ê³  ë§í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'faith', name: 'ë¯¿ìŒ', questions: [
                { id: 14, text: 'ì–´ë–¤ ëª¨ì„ì—ì„œë“  ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì˜ê²¬ì„ ì¢…í•©í•˜ê³  ë°©í–¥ì„ ì œì‹œí•˜ëŠ” ì—­í• ì„ ë§¡ê²Œ ë©ë‹ˆë‹¤.' },
                { id: 39, text: 'ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•˜ëŠ” ìƒí™©ì—ì„œë„, í•˜ë‚˜ë‹˜ì´ ì¼í•˜ì‹¤ ê²ƒì„ êµ³ê²Œ ë¯¿ê³  ë‚˜ì•„ê°‘ë‹ˆë‹¤.' },
                { id: 64, text: 'ì‚¬ëŒë“¤ì€ ì œê°€ ë³´í†µ ì‚¬ëŒë“¤ì´ ìƒê°í•˜ê¸° í˜ë“  í° ë¹„ì „ì„ í’ˆê³  ë¯¿ìŒìœ¼ë¡œ ë„ì „í•œë‹¤ê³  ë§í•©ë‹ˆë‹¤.' }
            ]},
            { id: 'leadership', name: 'ë‹¤ìŠ¤ë¦¼(ë¦¬ë”ì‹­)', questions: [
                { id: 16, text: 'ì²´ê³„ê°€ ì¡íˆì§€ ì•Šì€ ëª¨ì„ì´ë‚˜ ì¡°ì§ì˜ ì•½ì ì„ íŒŒì•…í•˜ê³ , ë” ë‚˜ì€ ë°©í–¥ìœ¼ë¡œ ê°œì„ í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤.' },
                { id: 41, text: 'ì–´ë–¤ ëª©í‘œë¥¼ ì´ë£¨ê¸° ìœ„í•´ í•„ìš”í•œ ì•„ì´ë””ì–´, ì‚¬ëŒ, ìì› ë“±ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì¡°ì§í•˜ê³  ê³„íší•˜ëŠ” ë° ëŠ¥ìˆ™í•©ë‹ˆë‹¤.' },
                { id: 66, text: 'ê³µë™ì²´ì˜ ëª©í‘œë¥¼ ëª…í™•í•˜ê²Œ ì„¤ì •í•˜ê³ , êµ¬ì„±ì›ë“¤ì´ ê·¸ ëª©í‘œë¥¼ í•¨ê»˜ ì´ë£¨ë„ë¡ ì´ë„ëŠ” ê²ƒì— ìì‹  ìˆìŠµë‹ˆë‹¤.' }
            ]},
            { id: 'intercession', name: 'ì¤‘ë³´ê¸°ë„', questions: [
                { id: 23, text: 'ë‹¤ë¥¸ ì–´ë–¤ ê²ƒë³´ë‹¤ ê¸°ë„ì˜ ì‹œê°„ì„ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ë©°, ë§¤ì¼ ê¾¸ì¤€íˆ ì§€í‚¤ë ¤ê³  ë…¸ë ¥í•©ë‹ˆë‹¤.' },
                { id: 48, text: 'ëˆ„êµ°ê°€ì—ê²Œ ê¸°ë„ ë¶€íƒì„ ë°›ìœ¼ë©´, ê·¸ ê¸°ë„ ì œëª©ì„ ìŠì§€ ì•Šê³  ì˜¤ë«ë™ì•ˆ ë§ˆìŒì— í’ˆê³  ê¸°ë„í•©ë‹ˆë‹¤.' },
                { id: 73, text: 'ë‹¤ë¥¸ ì‚¬ëŒì´ë‚˜ ê³µë™ì²´ë¥¼ ìœ„í•´ ê¸°ë„í•˜ëŠ” ì‹œê°„ì´ ì œê²ŒëŠ” ê°€ì¥ ì˜ë¯¸ ìˆê³  ì¦ê±°ìš´ ì‹œê°„ì…ë‹ˆë‹¤.' }
            ]},
            { id: 'service', name: 'ë´‰ì‚¬', questions: [
                { id: 25, text: 'êµíšŒë‚˜ ê³µë™ì²´ì— í•„ìš”í•œ ì¼ì´ ìƒê²¼ì„ ë•Œ, ëˆ„ê°€ ì‹œí‚¤ì§€ ì•Šì•„ë„ ê¸°ì˜ê²Œ ì°¸ì—¬í•©ë‹ˆë‹¤.' },
                { id: 50, text: 'íŠ¹ë³„í•œ ê¸°ìˆ ì€ ì—†ì§€ë§Œ, ê³µë™ì²´ë¥¼ ìœ„í•´ ê¶‚ì€ì¼ì´ë¼ë„ ê¸°êº¼ì´ í•˜ëŠ” í¸ì…ë‹ˆë‹¤.' },
                { id: 75, text: 'ì‚¬ëŒë“¤ì€ ì œê°€ ë‹¨ìˆœí•˜ê³  ë°˜ë³µë˜ëŠ” ì¼ì´ë¼ë„ ì‹«ì¦ ë‚´ì§€ ì•Šê³  ê¾¸ì¤€íˆ ì˜ ê°ë‹¹í•œë‹¤ê³  ì¹­ì°¬í•©ë‹ˆë‹¤.' }
            ]},
            {id: 'administration', name: 'í–‰ì •', questions: [
                { id: 201, text: 'ì¡°ì§ì˜ ëª©í‘œë¥¼ ëª…í™•í•˜ê²Œ ì„¸ìš°ê³ , ê·¸ ëª©í‘œë¥¼ ì´ë£¨ê¸° ìœ„í•œ êµ¬ì²´ì ì¸ ê³„íšì„ ì„¸ìš°ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤.' },
                { id: 202, text: 'ë‹¤ì–‘í•œ ìì›(ì‚¬ëŒ, ì‹œê°„, ì¬ì •)ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ê°€ì¥ íš¨ê³¼ì ì¸ ê³³ì— ë°°ì¹˜í•˜ëŠ” ë° ê°•ì ì´ ìˆìŠµë‹ˆë‹¤.' },
                { id: 203, text: 'ì‚¬ëŒë“¤ì€ ì œê°€ ë§¡ì€ ì¼ì´ë‚˜ í”„ë¡œì íŠ¸ê°€ ì§ˆì„œì •ì—°í•˜ê²Œ ì˜ ì§„í–‰ëœë‹¤ê³  ìì£¼ ë§í•©ë‹ˆë‹¤.' }
            ]}
        ];

        // --- ì´í•˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ì „ê³¼ ë™ì¼ ---

        const questionsContainer = document.getElementById('questions-container');
        const form = document.getElementById('gifts-form');
        const resultsDiv = document.getElementById('results');
        const resultsList = document.getElementById('results-list');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        let allQuestions = [];

        giftsData.forEach(gift => { 
            gift.questions.forEach(question => {
                allQuestions.push({ ...question, giftId: gift.id });
            });
        });

        allQuestions.sort(() => Math.random() - 0.5);
        
        const totalQuestions = allQuestions.length;
        progressText.textContent = `0 / ${totalQuestions}`;

        allQuestions.forEach((question, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <p class="question-text">${index + 1}. ${question.text}</p>
                <div class="score-selector">
                    <button type="button" class="score-btn" data-value="3">3</button>
                    <button type="button" class="score-btn" data-value="2">2</button>
                    <button type="button" class="score-btn" data-value="1">1</button>
                    <button type="button" class="score-btn" data-value="0">0</button>
                </div>
                <input type="hidden" name="q${question.id}" data-gift-id="${question.giftId}" value="">
            `;
            questionsContainer.appendChild(card);
        });

        questionsContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('score-btn')) {
                const button = e.target;
                const value = button.dataset.value;
                const parentSelector = button.parentElement;
                const questionCard = parentSelector.parentElement;
                const hiddenInput = questionCard.querySelector('input[type="hidden"]');
                
                parentSelector.querySelectorAll('.score-btn').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                hiddenInput.value = value;
                
                updateProgress();
            }
        });
        
        function updateProgress() {
            const answeredQuestions = document.querySelectorAll('input[type="hidden"][value]:not([value=""])').length;
            const percentage = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${answeredQuestions} / ${totalQuestions}`;
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const answeredQuestions = document.querySelectorAll('input[type="hidden"][value]:not([value=""])').length;
            if (answeredQuestions < totalQuestions) {
                alert('ëª¨ë“  ë¬¸í•­ì— ë‹µë³€í•´ì£¼ì„¸ìš”.');
                return;
            }

            const scores = {};
            giftsData.forEach(gift => {
                scores[gift.id] = { 
                    name: gift.name, 
                    score: 0, 
                    questionCount: gift.questions.length
                };
            });

            document.querySelectorAll('input[type="hidden"]').forEach(input => {
                if (input.value !== '') {
                    const giftId = input.dataset.giftId;
                    scores[giftId].score += parseInt(input.value);
                }
            });
            
            const sortedGifts = Object.entries(scores).map(([id, data]) => {
                return { id, ...data };
            }).sort((a, b) => b.score - a.score);

            displayResults(sortedGifts.slice(0, 5));
        });

        function displayResults(topGifts) {
            resultsList.innerHTML = '';
            const rankPrefix = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', '4', '5'];
            
            resultsDiv.querySelector('h2').textContent = `ë‚˜ì˜ ì€ì‚¬ í…ŒìŠ¤íŠ¸ ê²°ê³¼ (ìƒìœ„ 5ê°œ)`;

            topGifts.forEach((gift, index) => {
                if (gift.score === 0) return;

                const maxScore = gift.questionCount * 3;
                const percentage = maxScore > 0 ? (gift.score / maxScore) * 100 : 0;

                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <div class="rank">${rankPrefix[index] || (index + 1)}</div>
                    <div class="result-details">
                        <p class="gift-name">${gift.name}</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 0%;" data-percentage="${percentage}">
                                ${gift.score}ì 
                            </div>
                        </div>
                    </div>`;
                resultsList.appendChild(resultItem);
            });

            resultsDiv.style.display = 'block';
            
            setTimeout(() => {
                resultsDiv.querySelectorAll('.progress-bar').forEach(bar => {
                    bar.style.width = bar.dataset.percentage + '%';
                });
            }, 100);

            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
