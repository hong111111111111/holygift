<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ 은사 발견 테스트</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');

        :root {
            --primary-color: #5a67d8; /* 차분한 파란색 계열로 변경 */
            --primary-light: #ebf4ff;
            --background-color: #f7fafc;
            --card-background: #ffffff;
            --text-dark: #2d3748;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --white: #fff;
            --success-color: #48bb78; /* 결과 바 색상 */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--background-color);
            color: var(--text-dark);
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 700px;
        }

        .test-wrapper, #results {
            background-color: var(--card-background);
            border-radius: 20px; /* 더 부드러운 곡선 */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
            padding: 40px;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--text-dark);
            text-align: center;
            margin-bottom: 15px;
            font-size: 2em;
            font-weight: 700;
        }

        .instructions {
            text-align: center;
            color: var(--text-light);
            background-color: var(--primary-light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .instructions p { margin: 8px 0; }
        .instructions strong { color: var(--primary-color); }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar-bg {
            width: 100%;
            height: 12px;
            background-color: var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-bar-fg {
            width: 0%;
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 6px;
            transition: width 0.4s ease-in-out;
        }
        
        .progress-text {
            text-align: right;
            font-size: 0.9em;
            color: var(--text-light);
            margin-top: 8px;
            font-weight: 500;
        }

        .question-card {
            margin-bottom: 15px;
            padding: 20px 25px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            transition: box-shadow 0.2s ease, border-color 0.2s ease;
        }

        .question-card:focus-within { /* 답변 선택 시 시각적 효과 */
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .question-text {
            font-weight: 500;
            line-height: 1.6;
            flex-grow: 1;
        }

        .score-selector {
            display: flex;
            gap: 10px;
            flex-shrink: 0;
        }

        .score-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            background-color: var(--card-background);
            color: var(--text-light);
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .score-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-2px); /* 호버 시 살짝 위로 */
        }

        .score-btn.selected {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--white);
            transform: scale(1.1); /* 선택 시 강조 효과 */
        }

        .submit-button {
            display: block;
            width: 100%;
            padding: 18px;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--white);
            background: linear-gradient(45deg, #5a67d8, #7f9cf5); /* 그라데이션 적용 */
            border: none;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            margin-top: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(90, 103, 216, 0.4);
        }

        .submit-button:hover {
            opacity: 0.9;
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(90, 103, 216, 0.5);
        }

        #results {
            margin-top: 30px;
            display: none; /* Initially hidden */
        }
        
        #results h2 {
            text-align: center;
            color: var(--text-dark);
            margin-bottom: 30px;
        }
        
        .result-item { display: flex; align-items: center; margin-bottom: 25px; }
        .result-item:last-child { margin-bottom: 0; }
        .rank { font-size: 1.8em; font-weight: 700; color: var(--text-light); width: 60px; text-align: center;}
        .result-details { flex-grow: 1; }
        .gift-name { font-size: 1.25em; font-weight: 700; margin: 0 0 10px 0; color: var(--text-dark); }
        .progress-bar-container { width: 100%; background-color: var(--border-color); border-radius: 8px; height: 22px; overflow: hidden; }
        .progress-bar { 
            height: 100%; 
            background: linear-gradient(90deg, var(--success-color), #81e6d9);
            width: 0%; 
            border-radius: 8px; 
            transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); /* 부드러운 애니메이션 */
            display: flex; 
            align-items: center; 
            justify-content: flex-end; /* 텍스트 오른쪽 정렬 */
            color: var(--white); 
            font-size: 0.9em;
            font-weight: 700;
            padding-right: 10px;
        }

        @media (max-width: 600px) {
            body { padding: 15px; }
            .test-wrapper, #results { padding: 25px; }
            h1 { font-size: 1.7em; }
            .question-card { flex-direction: column; align-items: flex-start; gap: 15px; }
            .score-selector { align-self: center; /* 버튼 가운데 정렬 */ width: 100%; justify-content: space-around;}
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="test-wrapper">
            <h1>✨ 은사 발견 테스트 ✨</h1>
            <div class="instructions">
                <p>샬롬 :) <br> 여러분의 은사를 다시 불일듯 하게 하는 여정 돕기 위해, 은사테스트를 준비해 봤어요! 이번 아웃리치가 열방 뿐 아니라 우리 서로를 세우는 사랑의 여정 되기를 소원하며, 마음 다해 축복합니다! - <strong>홍</strong>
                    <br> (질문출처: <성경적 은사>,생명의 말씀사)</p>
                <p>각 문항이 자신에게 얼마나 해당하는지 <br><strong>숫자</strong>를 눌러 선택해주세요.</p>
                <p><strong>3</strong>: 매우 그렇다, <strong>2</strong>: 대체로 그렇다, <strong>1</strong>: 조금 그렇다, <strong>0</strong>: 전혀 그렇지 않다</p>
            </div>

            <form id="gifts-form">
                <div class="progress-container">
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fg" id="progress-bar"></div>
                    </div>
                    <div class="progress-text" id="progress-text">0 / 85</div>
                </div>

                <div id="questions-container"></div>
                <button type="submit" class="submit-button">결과 확인하기</button>
            </form>
        </div>

        <div id="results">
            <h2>나의 은사 테스트 결과</h2>
            <div id="results-list"></div>
        </div>
    </div>

    <script>
        const giftsData = [
            { id: 'pastoring', name: '양육', questions: [
                { id: 2, text: '나는 여러 사람들과 계속해서 개인적으로 그들의 성공과 실패를 같이 나누면서 동참하는 일을 좋아한다.' }, { id: 27, text: '나는 성도들의 영적 축복을 위해 책임 맡은 자라고 확신하며 또 일에 즐거워 한다.' }, { id: 52, text: '나는 성도를 인도하고 영적으로 지도해주는 일에 두려움을 느끼지 않는다.' }, { id: 77, text: '나는 동료신자들에게 말씀으로 인도, 양육하면서 함께 기도해 주고 있다.' }, { id: 102, text: '사람들은 말하기를 내가 그들을 도왔기 때문에 그들의 공동체가 회복되었다고 한다.' }
            ]},
            { id: 'teaching', name: '가르침', questions: [
                { id: 3, text: '나는 여러 사람들로부터 내가 성경의 진리를 그들에게 의미 있게 잘 가르친다고 말하는 것을 듣는다.' }, { id: 28, text: '나는 건전한 그리스도의 몸의 사역을 위한 신약의 교훈을 의미 있게 설명할 수 있다고 생각한다.' }, { id: 53, text: '나는 성경의 새로운 진리를 다른 사람들에게 전달하기 위하여 성경을 연구하는 일에 많은 시간을 투자할 수 있다.' }, { id: 78, text: '나는 성경 말씀을 가르칠 때 그들의 지식, 태도, 가치, 혹은 행위가 변화되는 것을 보게 된다.' }, { id: 103, text: '성경을 공부하고 그것을 남과 나누는 것은 나에게 얼마나 행복한 것인지 모른다.' }
            ]},
            { id: 'wisdom', name: '지혜', questions: [
                { id: 4, text: '나는 성경의 영적 진리를 나의 생활에 잘 적용하여 왔다고 생각한다.' }, { id: 29, text: '매우 복잡한 문제를 직관적으로 해결할 수 있는 경우를 많이 당한다.' }, { id: 54, text: '사람들이 문제가 있을때 나는 자주 최선의 성경적 해결책을 제시해 주곤 한다.' }, { id: 79, text: '어떤 사람들은 내가 성경의 진리를 잘 깨닫고 또한 취사선택 하여 다른 신자들의 필요를 채워주고 있다고 말한다.' }, { id: 104, text: '나는 어떠한 중요한 결정을 하게 될 때 하나님의 비상한 임재를 개인적으로 확신할 때가 많다.' }
            ]},
            { id: 'knowledge', name: '지식', questions: [
                { id: 5, text: '사람들은 내가 성경의 지식을 아주 알기 쉽게 가르치고 설명한다고 말한다.' }, { id: 30, text: '나는 사람들이 하나님께 더 가까이 갈 수 있도록 도움이 되는 영적 통찰력을 가지곤 한다.' }, { id: 55, text: '연구와 경험을 통하여 나는 하나님 나라의 확장을 위해 필요한 주요 전략과 방법을 구별해 왔다.' }, { id: 80, text: '나는 새로운 성경의 진리를 배우기 위해 성경을 꽤 많은 시간을 드려 공부하고 읽는다.' }, { id: 105, text: '나는 즉각적으로 어떤 상황을 살펴 나 자신을 위한 새로운 진리를 발견하는 능력을 가지고 있다.' }
            ]},
            { id: 'exhortation', name: '권면', questions: [
                { id: 6, text: '나는 문제 때문에 낙심하고 절망한 사람들을 말로써 위로하고 격려하는 것을 좋아한다.' }, { id: 31, text: '나는 필요한 사역에 사람들이 참여하도록 효과적으로 동기를 부여하고 격려할 수 있다.' }, { id: 56, text: '슬픔이나 고통을 당한 사람들이 나를 찾아오면, 그 문제가 해결되거나 감소 되는 데에 큰 도움이 된다고 말하곤 한다.' }, { id: 81, text: '나는 실망한 자, 죄책감에 시달리는 자, 혹은 중독자를 효과적으로 상담해주고 싶은 소원을 가지고 있다.' }, { id: 106, text: '나는 고난과 고통 당하는 사람들에게 그 해결책으로 성경을 찾아보도록 권면하고 있다.' }
            ]},
            {id: 'relationship', name: '관계', questions: [
                { id: 301, text: '나는 새로운 사람들과 쉽게 친해지고 그들이 나와 함께 있을 때 편안함을 느낀다고 말한다.' }, { id: 302, text: '사람들은 나에게 고민을 자주 털어놓고, 나와 대화하면 마음이 가벼워진다고 말한다.' },{ id: 303, text: '나는 공동체 안에서 갈등이 생겼을 때 중간에서 화해시키는 역할을 자주 맡는다.' },{ id: 304, text: '나는 누군가를 판단하기보다 이해하려는 마음으로 관계를 맺으려 한다.' },{ id: 305, text: '사람들과의 깊은 관계 안에서 하나님의 사랑을 나누는 것이 나에게 기쁨이 된다.' }
            ]},
            { id: 'helps', name: '도움', questions: [
                { id: 9, text: '나는 주의 종들이 그들의 사명을 잘 감당하도록 여러모로 도와주기를 즐거워한다.' }, { id: 34, text: '많은 사람들이 그들의 사역에 내가 많은 도움이 되었다고 말한다.' }, { id: 59, text: '나는 다른 사람들이 이미 해 놓은 지루한 일도 즐겁게 하는 경향이 있다.' }, { id: 84, text: '나는 남모르게 사람을 도울 때 정말 기쁘다.' }, { id: 109, text: '내가 주님의 일을 할 때 누가 더 인정을 받느냐 하는 것은 나에게 큰 문제가 아니다.' }
            ]},
            { id: 'mercy', name: '긍휼', questions: [
                { id: 10, text: '나는 몸이나 마음에 병든 사람들이 고통이 감소되도록 그들과 함께 일하고 싶어한다.' }, { id: 35, text: '나는 다른 사람들이 물질적으로나 실체적으로 필요할 때 그들의 필요를 채워주고 있다.' }, { id: 60, text: '나는 병원이나 양로원을 방문하여 위로하는 일이 적격이라고 생각한다.' }, { id: 85, text: '불행한 사람을 도와야 할 때 사람들은 나를 부른다.' }, { id: 110, text: '나는 고독한 사람, 혼자 사는 사람, 감옥에 있는 사람들을 위해서 시간을 보내는 것이 즐겁다.' }
            ]},
            { id: 'missionary', name: '선교', questions: [
                { id: 11, text: '나는 특별히 소외되거나 힘이 없는 사람들과 어울리는 것을 좋아하며, 그들도 나를 잘 받아 들이는 편이다.' }, { id: 36, text: '나는 다른 문화권 안에 있는 사람들을 전도하기 위하여 외국어를 배울 때 아주 쉽고 빨리 배울 수 있다고 생각한다.' }, { id: 61, text: '다른 나라 사람들과 어울리는 데에 큰 어려움이 없고 그것을 좋아한다.' }, { id: 86, text: '나는 사람들을 더 많이 전도할 수 있는 상황에 처할 때 매우 마음이 기쁘고 편하다.' }, { id: 111, text: '무엇보다도, 나는 다른 나라에서 사람들이 예수를 믿는 것을 보고 싶다.' }
            ]},
            { id: 'evangelism', name: '전도', questions: [
                { id: 12, text: '나는 전도하여 불신자에게 예수님을 영접하게 하는 일을 즐겨 한다.' }, { id: 37, text: '내가 예수 믿고 구원받은 것을 간증할 때 많은 불신자들이 은혜를 받는다.' }, { id: 62, text: '내가 예수 믿는 것을 자주 표현하여 영향을 미쳐도 불신자들은 내가 그들과 함께 있는 것을 좋아하는 편이다.' }, { id: 87, text: '나는 다른 사람들이 나처럼 불신자에게 전도하지 않을 때 매우 실망한다.' }, { id: 112, text: '나는 불신자를 전도하려는 소원 때문에 그들로부터 호감을 갖게 하는 사람이라고 생각한다.' }
            ]},
            { id: 'hospitality', name: '대접', questions: [
                { id: 13, text: '나의 집은 누구든지 머무르고 싶어하는 사람들에게 열려있다.' }, { id: 38, text: '나는 교회 행사에 몸으로 봉사하기를 즐겨 한다.' }, { id: 63, text: '우리 집에 오는 사람들마다 마치 자기네 집인 것처럼 편안하다고 말하곤 한다.' }, { id: 88, text: '사람들은 내가 손님접대하기를 좋아한다고 한다.' }, { id: 113, text: '나는 주의 종이 필요하다면 언제든지 나의 집을 그들에게 제공하고 싶은 마음이다.' }
            ]},
            { id: 'faith', name: '믿음', questions: [
                { id: 14, text: '어느 모임에서나 다른 사람들이 내가 인도자가 되기를 바라는 편이다.' }, { id: 39, text: '나는 불가능한 일이 쉽게 일어날 것을 하나님께 믿고 또 그것을 체험한다.' }, { id: 64, text: '사람들은 말하기를 내가 다른 사람들이 못하는 일을 감당하는 믿음을 가졌다고 말한다.' }, { id: 89, text: '다른 사람들은 잘 못 느끼지만, 나는 하나님의 사역이 미래에 어떻게 발전될 것인가에 대한 하나님의 특별한 뜻을 확실하게 느낄 때가 많다.' }, { id: 114, text: '사람들은 내가 특별한 꿈을 말하는 사람이라고 하는데, 나도 그렇게 생각한다.' }
            ]},
            { id: 'administration', name: '다스림', questions: [
                { id: 16, text: '조직이 잘 안되어 있는 그룹에서 나는 그 약한 조직을 강화시켜 주기를 즐겨 한다.' }, { id: 41, text: '나는 보다 효과적인 사역을 위해 아이디어, 사람, 물질 등의 자원을 조직화 하는 데에 특별한 취미와 능력이 있다고 생각한다.' }, { id: 66, text: '나는 어떤 그룹의 목표를 세우고 성취하는 일에 효과적이라고 생각한다.' }, { id: 91, text: '나는 어떤 일을 하라고 설득할 필요 없이 다른 사람을 인도할 수 있다.' }, { id: 116, text: '나는 나의 교회에서 어떤 일을 성공시키는 책임을 맡는 것을 즐거워 한다.' }
            ]},
            { id: 'poverty', name: '청빈', questions: [
                { id: 21, text: '나는 더 편안하게 살수 있지만, 가난한 사람들과 함께 하기 위하여 청빈하게 산다.' }, { id: 46, text: '검소한 생활을 하는 것이 나에게는 그렇게 즐거울 수가 없다.' }, { id: 71, text: '나는 가난한 편은 아니지만, 가난한 사람과 쉽게 어울릴 수 있다.' }, { id: 96, text: '사람들에 의하면 나는 너무 지나치게 주의 일 때문에 물질적으로 희생하고 있다고 한다.' }, { id: 121, text: '내가 그들과 같은 수준의 삶을 살기 때문에 가난한 사람들이 나를 받아들인다.' }
            ]},
            { id: 'intercession', name: '중보기도', questions: [
                { id: 23, text: '나는 매일 기도의 시간을 작정해 지키는 것을 최우선순위에 둔다.' }, { id: 48, text: '누가 나에게 기도를 부탁하면 나는 최소한 일주일 이상 기도해 준다.' }, { id: 73, text: '남을 위한 중보기도는 내가 시간을 보내는 가장 즐거운 때이다.' }, { id: 98, text: '내가 기도해 준 사람들에 의하면 중보에 힘을 얻으며 그 응답을 확실하게 경험한다고 한다.' }, { id: 123, text: '내가 기도할 때, 하나님은 자주 나에게 말씀으로 응답하신다.' }
            ]},
            { id: 'service', name: '봉사', questions: [
                { id: 25, text: '나는 교회를 위한 특별한 일에 부름 받는 것을 즐거워한다.' }, { id: 50, text: '나는 특별한 기술은 없지만 교회가 필요한 일이라면 무엇이든지 한다.' }, { id: 75, text: '사람들은 나를 가리켜 평범한 일에 싫증 내지 않고 잘한다고 칭찬하는 편이다.' }, { id: 100, text: '나는 누가 말하는 것을 듣거나, 단지 읽거나, 대화를 나누기 보다는 무엇인가 적극적으로 행동하는 것을 더 좋아한다.' }, { id: 125, text: '나는 비록 작고 보잘 것 없는 일일지라도 어떤 일을 부탁 받으면 기쁨으로 응답하는 편이다.' }
            ]},
            {id: 'administration', name: '행정', questions: [
                { id: 201, text: '나는 조직의 목표를 명확히 설정하고, 그 목표에 따라 계획을 세우는 일을 즐겨 한다.' }, { id: 202, text: '나는 다양한 자원(사람, 시간, 재정 등)을 체계적으로 관리하고 배치하는 데 강점을 느낀다.' }, { id: 203, text: '사람들은 내가 맡은 일이나 프로젝트가 질서 있게 진행된다고 자주 말한다.' }, { id: 204, text: '나는 복잡한 일을 단계적으로 나누고, 우선순위를 정해서 실행하는 데에 자신이 있다.' },{ id: 205, text: '내가 맡은 모임이나 조직은 시간이 지날수록 점점 더 효율적이고 안정적으로 운영된다.' }
            ]}
        ];

        const questionsContainer = document.getElementById('questions-container');
        const form = document.getElementById('gifts-form');
        const resultsDiv = document.getElementById('results');
        const resultsList = document.getElementById('results-list');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        
        let allQuestions = [];
        giftsData.forEach(gift => { 
            // 중복된 은사 카테고리(행정)를 합치기 위한 로직 추가
            const existingGift = allQuestions.find(q => q.giftId === gift.id);
            if (existingGift) {
                gift.questions.forEach(q => {
                    allQuestions.push({ ...q, giftId: gift.id, giftName: gift.name });
                });
            } else {
                 gift.questions.forEach(q => {
                    allQuestions.push({ ...q, giftId: gift.id, giftName: gift.name });
                });
            }
        });

        // 질문들을 랜덤으로 섞기
        allQuestions.sort(() => Math.random() - 0.5);
        
        const totalQuestions = allQuestions.length;
        progressText.textContent = `0 / ${totalQuestions}`;

        // 질문 카드 생성
        allQuestions.forEach((question, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.innerHTML = `
                <p class="question-text">${index + 1}. ${question.text}</p>
                <div class="score-selector">
                    <button type="button" class="score-btn" data-value="3">3</button>
                    <button type="button" class="score-btn" data-value="2">2</button>
                    <button type="button" class="score-btn" data-value="1">1</button>
                    <button type="button" class="score-btn" data-value="0">0</button>
                </div>
                <input type="hidden" name="q${question.id}" data-gift-id="${question.giftId}" value="">
            `;
            questionsContainer.appendChild(card);
        });

        // 점수 버튼 클릭 이벤트
        questionsContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('score-btn')) {
                const button = e.target;
                const value = button.dataset.value;
                const parentSelector = button.parentElement;
                const questionCard = parentSelector.parentElement;
                const hiddenInput = questionCard.querySelector('input[type="hidden"]');
                
                // 같은 그룹 내 다른 버튼 선택 해제
                parentSelector.querySelectorAll('.score-btn').forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                hiddenInput.value = value;
                
                updateProgress();
            }
        });
        
        // 진행도 업데이트 함수
        function updateProgress() {
            const answeredQuestions = document.querySelectorAll('input[type="hidden"][value]:not([value=""])').length;
            const percentage = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${answeredQuestions} / ${totalQuestions}`;
        }

        // 폼 제출 이벤트
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const answeredQuestions = document.querySelectorAll('input[type="hidden"][value]:not([value=""])').length;
            if (answeredQuestions < totalQuestions) {
                alert('모든 문항에 답변해주세요.');
                return;
            }

            // 점수 계산
            const scores = {};
            giftsData.forEach(gift => {
                scores[gift.id] = { name: gift.name, score: 0, questionCount: gift.questions.length };
            });

            document.querySelectorAll('input[type="hidden"]').forEach(input => {
                if (input.value !== '') {
                    const giftId = input.dataset.giftId;
                    scores[giftId].score += parseInt(input.value);
                }
            });

            const sortedGifts = Object.entries(scores).map(([id, data]) => {
                return { id, ...data };
            }).sort((a, b) => b.score - a.score);

            displayResults(sortedGifts.slice(0, 3));
        });

        // 결과 표시 함수
        function displayResults(topGifts) {
            resultsList.innerHTML = '';
            const rankPrefix = ['🥇', '🥈', '🥉'];
            
            topGifts.forEach((gift, index) => {
                const maxScore = gift.questionCount * 3; // 각 은사별 만점 (질문 수 * 3)
                const percentage = (gift.score / maxScore) * 100;

                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <div class="rank">${rankPrefix[index]}</div>
                    <div class="result-details">
                        <p class="gift-name">${gift.name}</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 0%;" data-percentage="${percentage}">
                                ${gift.score}점
                            </div>
                        </div>
                    </div>`;
                resultsList.appendChild(resultItem);
            });

            const resultsContainer = document.getElementById('results');
            resultsContainer.style.display = 'block';
            
            // 결과 바 애니메이션
            setTimeout(() => {
                resultsContainer.querySelectorAll('.progress-bar').forEach(bar => {
                    bar.style.width = bar.dataset.percentage + '%';
                });
            }, 100);

            resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
